// IdentifyPage.scss
// 搭配 IdentifyPage.jsx 使用
// 假設專案已有 CSS 變數：--white, --sage, --mint, --radius 等

.identify {
    padding-top: 100px;
    padding-bottom: 80px;
    min-height: 100vh;

    &__container {
        max-width: 760px;
        margin: 0 auto;
        padding: 0 24px;
    }

    // ── 標題區 ──────────────────────────────────────
    &__header {
        text-align: center;
        margin-bottom: 40px;
    }

    &__title {
        color: rgb(19, 65, 21);
        margin-bottom: 12px;
    }

    &__subtitle {
        //color: rgba(250, 250, 247, 0.55);
        font-size: 1rem;
        line-height: 1.7;
        //max-width: 480px;
        margin: 0 auto;
    }

    // ── 拖曳上傳區 ───────────────────────────────────
    &__dropzone {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;

        padding: 60px 40px;
        border-radius: var(--radius, 16px);
        border: 2px dashed rgba(82, 183, 136, 0.3);
        background: rgba(30, 51, 38, 0.3);
        cursor: pointer;
        transition:
            border-color 0.2s ease,
            background 0.2s ease,
            box-shadow 0.2s ease;
        animation: pulseRing 3s ease-in-out infinite;

        &--active,
        &:hover {
            border-color: var(--sage);
            background: rgba(82, 183, 136, 0.06);
            box-shadow: 0 0 0 4px rgba(82, 183, 136, 0.2);
            animation: none;
        }
    }

    &__dropzone-icon {
        font-size: 5rem;
        line-height: 1;
        margin-bottom: 24px;
    }

    &__dropzone-title {
        color: rgb(19, 65, 21);
        margin-bottom: 12px;
    }

    &__dropzone-sub {
        margin-bottom: 28px;
        font-size: 1rem;
        color: #2e7d32;
    }

    &__ext-list {
        display: inline-flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        color: #2e7d32;
    }

    &__size-hint {
        margin-top: 16px;
        font-size: 1rem;
        color: rgba(20, 13, 2, 0.3);
        font-weight: bold;
    }

    // ── 預覽區 ───────────────────────────────────────
    .identify__preview {
        width: 100%;
    }

    .identify__preview-hero {
        position: relative;
        width: 100%;
        height: 480px;
        border-radius: var(--radius, 16px);
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(14, 26, 18, 0.5);
    }

    // 大圖：完整填滿容器
    .identify__preview-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.4s ease;

        .identify__preview-hero:hover & {
            transform: scale(1.02);
        }
    }

    // 左上角：狀態標籤
    .identify__preview-status {
        position: absolute;
        top: 16px;
        left: 16px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 14px;
        border-radius: 50px;
        background: rgba(14, 26, 18, 0.65);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(82, 183, 136, 0.3);
        color: var(--mint);
        font-size: 0.8rem;
        font-weight: 600;
    }

    .identify__preview-dot {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: var(--mint);
        box-shadow: 0 0 6px var(--mint);
        animation: blink 1.6s ease-in-out infinite;
    }

    @keyframes blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0.3;
        }
    }

    // 右上角：檔案資訊
    .identify__preview-meta {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 4px;
        padding: 8px 14px;
        border-radius: 10px;
        background: rgba(14, 26, 18, 0.65);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.06);
        max-width: 220px;
    }

    .identify__preview-filename {
        color: var(--white);
        font-size: 0.78rem;
        font-weight: 600;
        word-break: break-all;
        text-align: right;
        line-height: 1.4;
    }

    .identify__preview-size {
        color: rgba(250, 250, 247, 0.4);
        font-size: 0.72rem;
    }

    // 底部漸層遮罩
    .identify__preview-footer {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 48px 24px 24px;
        background: linear-gradient(to top, rgba(14, 26, 18, 0.92) 0%, transparent 100%);
    }

    // 按鈕排列
    .identify__preview-actions {
        display: flex;
        gap: 12px;
        align-items: center;

        .btn-primary {
            flex: 1;
        }
    }

    .identify__reset-btn {
        padding: 10px 20px;
        border-radius: var(--radius-sm, 10px);
        border: 1px solid rgba(250, 250, 247, 0.15);
        background: transparent;
        color: rgba(250, 250, 247, 0.55);
        font-size: 0.85rem;
        cursor: pointer;
        white-space: nowrap;
        transition:
            border-color 0.2s,
            color 0.2s;

        &:hover {
            border-color: rgba(250, 250, 247, 0.35);
            color: var(--white);
        }
    }

    // ── 掃描效果 ───────────────────────────────────────
    .identify__scan-overlay {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
        border-radius: var(--radius, 16px);
        animation: scanFadeIn 0.3s ease;
    }

    @keyframes scanFadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    // 上下往返的掃描線
    .identify__scan-line {
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(
            90deg,
            transparent 0%,
            rgba(82, 183, 136, 0.4) 20%,
            rgba(82, 183, 136, 1) 50%,
            rgba(82, 183, 136, 0.4) 80%,
            transparent 100%
        );
        box-shadow:
            0 0 12px rgba(82, 183, 136, 0.8),
            0 0 30px rgba(82, 183, 136, 0.3);
        animation: scanLine 2s ease-in-out infinite;
    }

    @keyframes scanLine {
        0% {
            top: 0%;
            opacity: 0;
        }
        5% {
            opacity: 1;
        }
        95% {
            opacity: 1;
        }
        100% {
            top: 100%;
            opacity: 0;
        }
    }

    // 掃描線下方光暈面
    .identify__scan-line::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        height: 60px;
        background: linear-gradient(to bottom, rgba(82, 183, 136, 0.08) 0%, transparent 100%);
        transform: translateY(-100%);
    }

    // 半透明格線網格
    .identify__scan-grid {
        position: absolute;
        inset: 0;
        background-image:
            linear-gradient(rgba(82, 183, 136, 0.07) 1px, transparent 1px),
            linear-gradient(90deg, rgba(82, 183, 136, 0.07) 1px, transparent 1px);
        background-size: 40px 40px;
        animation: gridPulse 2s ease-in-out infinite;
    }

    @keyframes gridPulse {
        0%,
        100% {
            opacity: 0.5;
        }
        50% {
            opacity: 1;
        }
    }

    // 四角框（HUD 風格）
    .identify__scan-corner {
        position: absolute;
        width: 24px;
        height: 24px;
        border-color: var(--mint);
        border-style: solid;
        animation: cornerPulse 1.6s ease-in-out infinite;

        &--tl {
            top: 16px;
            left: 16px;
            border-width: 2px 0 0 2px;
            border-radius: 3px 0 0 0;
        }
        &--tr {
            top: 16px;
            right: 16px;
            border-width: 2px 2px 0 0;
            border-radius: 0 3px 0 0;
        }
        &--bl {
            bottom: 16px;
            left: 16px;
            border-width: 0 0 2px 2px;
            border-radius: 0 0 0 3px;
        }
        &--br {
            bottom: 16px;
            right: 16px;
            border-width: 0 2px 2px 0;
            border-radius: 0 0 3px 0;
        }
    }

    @keyframes cornerPulse {
        0%,
        100% {
            opacity: 1;
            box-shadow: 0 0 6px rgba(82, 183, 136, 0.6);
        }
        50% {
            opacity: 0.5;
            box-shadow: none;
        }
    }

    // 分析中狀態標籤變色
    .identify__preview-status--scanning {
        border-color: rgba(82, 183, 136, 0.6);
        color: var(--mint);

        .identify__preview-dot {
            background: var(--mint);
            box-shadow: 0 0 8px var(--mint);
        }
    }

    // ── 進度條（疊在圖片底部） ──────────────────────────────────────────────────
    .identify__progress {
        width: 100%;
    }

    .identify__progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        font-size: 0.85rem;
        color: var(--sage);
        font-weight: 500;
    }

    .identify__progress-track {
        height: 6px;
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.1);
        overflow: hidden;
    }

    .identify__progress-bar {
        height: 100%;
        border-radius: 50px;
        background: linear-gradient(90deg, var(--sage), var(--mint));
        transition: width 0.3s ease;
        box-shadow: 0 0 8px rgba(82, 183, 136, 0.5);
    }

    // ── 錯誤訊息 ─────────────────────────────────────
    &__error {
        margin-top: 20px;
        padding: 14px 20px;
        border-radius: 10px;
        background: rgba(193, 68, 14, 0.15);
        border: 1px solid rgba(193, 68, 14, 0.3);
        color: #f28b6a;
        font-size: 0.9rem;
        text-align: center;
    }

    // ── 提示卡片 ─────────────────────────────────────
    &__tips {
        margin-top: 40px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
    }

    &__tip-card {
        display: flex;
        flex-direction: column; // icon 與文字上下排列
        align-items: center; // 水平置中
        text-align: center; // ← 灰色區塊文字置中
        gap: 10px;
        padding: 20px 16px;
        background: rgba(82, 183, 136, 0.05);
        border-radius: 10px;
        border: 1px solid rgba(82, 183, 136, 0.1);
        transition: background 0.2s ease;

        &:hover {
            background: rgba(82, 183, 136, 0.09);
        }
    }

    &__tip-icon {
        font-size: 1.4rem;
        flex-shrink: 0;
    }

    &__tip-text {
        font-size: 1rem;
        line-height: 1.6;
        margin: 0;
        color: rgba(6, 12, 6, 0.6);
        font-weight: 700;
    }
}
