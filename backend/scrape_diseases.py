"""
scrape_diseases.py
çˆ¬å–æ¤ç‰©ç—…å®³ç›¸é—œè³‡è¨Šï¼š
  - Wikipediaï¼ˆè‹±æ–‡ï¼‰å„ç—…å®³é é¢
  - EPPO Global Databaseï¼ˆæ­æ´²æ¤ç‰©ä¿è­·çµ„ç¹”ï¼‰
  - USDA AMS / Extension ç¶²ç«™
  - å°ç£è¾²æ¥­çŸ¥è­˜ç¶²ï¼ˆè¾²å§”æœƒï¼‰
  - Plantwise Knowledge Bank

çˆ¬å–å…§å®¹ï¼šç—…å®³åç¨±ã€ç—…åŸé«”ã€ç—‡ç‹€ã€åˆ†å¸ƒã€åœ–ç‰‡ URL
çµæœå­˜è‡³ scraped_data/diseases.json
"""
import requests
from bs4 import BeautifulSoup
import json
import os
import time
import re

SCRAPED_DIR = "scraped_data"
os.makedirs(SCRAPED_DIR, exist_ok=True)

HEADERS = {
    "User-Agent": (
        "Mozilla/5.0 (Windows NT 10.0; Win64; x64) "
        "AppleWebKit/537.36 (KHTML, like Gecko) "
        "Chrome/124.0.0.0 Safari/537.36"
    )
}

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# éœæ…‹è£œå……è³‡æ–™ï¼ˆè¬ä¸€çˆ¬èŸ²å¤±æ•—ä»æœ‰åŸºç¤è³‡æ–™ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
STATIC_DISEASES = [
    {
        "id": "tomato_early_blight",
        "name_zh": "ç•ªèŒ„æ—©ç–«ç—…",
        "name_en": "Tomato Early Blight",
        "pathogen": "Alternaria solani",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["ç•ªèŒ„", "é¦¬éˆ´è–¯", "èŒ„å­"],
        "severity": "ä¸­åº¦",
        "severity_level": 2,
        "distribution": "å…¨çƒæ€§ï¼Œæº«æš–æ½®æ¿•åœ°å€æœ€æ™®éï¼Œå°ç£ä¸­å—éƒ¨å¤ç§‹å­£é«˜ç™¼",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾åŒå¿ƒåœ“ç‹€è¤è‰²ç—…æ–‘ï¼ˆé¶å¿ƒç‹€ï¼‰",
            "ç—…æ–‘ç›´å¾‘ 0.5â€“1.5 cmï¼Œå‘¨åœæœ‰é»ƒè‰²æšˆåœˆ",
            "ç”±æ¤æ ªä¸‹æ–¹è€è‘‰é–‹å§‹ç™¼ç—…ï¼Œé€æ¼¸å‘ä¸Šè”“å»¶",
            "åš´é‡æ™‚è‘‰ç‰‡è®Šé»ƒä¹¾æ¯è„«è½",
            "è–éƒ¨å¯å‡ºç¾æ©¢åœ“å½¢æš—è¤è‰²ç—…æ–‘"
        ],
        "causes": [
            "ç—…èŒä»¥èŒçµ²æˆ–åˆ†ç”Ÿå­¢å­åœ¨åœŸå£¤ä¸­çš„ç—…æ®˜é«”è¶Šå†¬",
            "æ°£æº« 24â€“29Â°C é…åˆé«˜æ¿•åº¦ï¼ˆ>90% RHï¼‰æœ€æ˜“ç™¼ç—…",
            "é€£ä½œèŒ„ç§‘ä½œç‰©ä½¿åœŸå£¤å¸¶èŒé‡ç´¯ç©",
            "æ¤æ ªç”Ÿé•·è¡°å¼±ã€æ°®è‚¥ä¸è¶³æ™‚æ›´æ˜“æ„Ÿç—…"
        ],
        "prevention": [
            "é¸ç”¨æŠ—ç—…å“ç¨®ï¼ˆå¦‚ Plum Regalã€Mountain Magicï¼‰",
            "å¯¦æ–½ 3 å¹´ä»¥ä¸Šè¼ªä½œï¼Œé¿å…é€£ä½œèŒ„ç§‘",
            "ä¿æŒé©ç•¶æ ªè·ï¼ˆ60 cm ä»¥ä¸Šï¼‰ï¼Œæ”¹å–„é€šé¢¨",
            "æ¡æ»´çŒæ–¹å¼ï¼Œé¿å…è‘‰é¢ç©æ°´",
            "ç§‹å­£æ·±ç¿»åœŸå£¤ï¼Œæ¸…é™¤ä¸¦ç‡’ç‡¬ç—…æ®˜é«”"
        ],
        "treatment": [
            "ä»£æ£®éŒ³é‹…ï¼ˆMancozebï¼‰75% WP 500 å€æ¶²ï¼Œæ¯ 7 å¤©å™´ä¸€æ¬¡",
            "äºæ‰˜æ•ï¼ˆAzoxystrobinï¼‰25% SC 1000 å€æ¶²",
            "å…‹å‡¡æ´¾ï¼ˆChlorothalonilï¼‰75% WP 600 å€æ¶²",
            "è…é»´åˆ©ï¼ˆProcymidoneï¼‰50% WP 1000 å€æ¶²",
            "ç™¼ç—…åˆæœŸç«‹å³æ–½è—¥ï¼Œé€£çºŒ 3â€“4 æ¬¡æ•ˆæœæœ€ä½³"
        ],
        "expert_advice": "æ—©ç–«ç—…åœ¨é€£ä½œåœ°å€åŠæ¢…é›¨å­£ç¯€ç™¼ç”Ÿç‡æ¥µé«˜ï¼Œå»ºè­°æ¡å–ã€Œé é˜²å„ªå…ˆã€ç­–ç•¥ï¼šåœ¨èŠ±æœŸå‰å³é–‹å§‹ä¿è­·æ€§å™´è—¥ï¼Œä¸¦æ­é…æœ‰æ©Ÿç¡…åŠ©åŠ‘æå‡å±•è‘—æ€§ã€‚è‹¥å·²å¤§é¢ç©ç™¼ç—…ï¼Œéœ€åŒæ™‚æ¸…é™¤ä¸‹æ–¹ç—…è‘‰ä»¥é™ä½å†æ„ŸæŸ“æºã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Alternaria_solani_on_tomato.jpg/640px-Alternaria_solani_on_tomato.jpg",
                "caption": "ç•ªèŒ„æ—©ç–«ç—…è‘‰ç‰‡å…¸å‹é¶å¿ƒç‹€ç—…æ–‘",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Tomato___Early_blight"
    },
    {
        "id": "tomato_late_blight",
        "name_zh": "ç•ªèŒ„æ™šç–«ç—…",
        "name_en": "Tomato Late Blight",
        "pathogen": "Phytophthora infestans",
        "category": "åµèŒæ€§ç—…å®³",
        "host_plants": ["ç•ªèŒ„", "é¦¬éˆ´è–¯"],
        "severity": "åš´é‡",
        "severity_level": 3,
        "distribution": "å…¨çƒæ€§ï¼Œæ„›çˆ¾è˜­å¤§é£¢è’ï¼ˆ1845ï¼‰çš„å…ƒå…‡ï¼Œå°ç£é«˜å±±å†·æ¶¼åœ°å€ç§‹å†¬å¤šç™¼",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾ä¸è¦å‰‡æ°´æµ¸ç‹€ç°ç¶ è‰²ç—…æ–‘",
            "æ½®æ¿•æ™‚ç—…æ–‘èƒŒé¢å‡ºç¾ç™½è‰²éœœç‹€é»´å±¤ï¼ˆå­¢å­å›Šæ¢—ï¼‰",
            "ç—…æ–‘æ“´å±•è¿…é€Ÿï¼Œ48 å°æ™‚å…§å¯è”“å»¶æ•´ç‰‡è‘‰",
            "è–éƒ¨å‡ºç¾é»‘è¤è‰²æ¢ç‹€ç—…æ–‘ï¼Œæ¤æ ªè¿…é€Ÿèå‡‹",
            "æœå¯¦å‡ºç¾ä¸è¦å‰‡è¤è‰²ç¡¬åŒ–ç—…æ–‘ï¼Œç„¡æ³•é£Ÿç”¨"
        ],
        "causes": [
            "ä½æº«ï¼ˆ10â€“25Â°Cï¼‰é…åˆé«˜æ¿•åº¦æ˜¯ä¸»è¦èª˜ç™¼æ¢ä»¶",
            "ç—…èŒåµå­¢å­å¯åœ¨åœŸå£¤ä¸­å­˜æ´»å¤šå¹´",
            "é›¨æ°´å’Œæ°£æµå‚³æ’­å­¢å­å›Šï¼Œå‚³æ’­é€Ÿåº¦æ¥µå¿«",
            "ä½¿ç”¨æ„ŸæŸ“ç—…æ¯’çš„ç¨®è–¯æˆ–ç¨®è‹—å¼•å…¥ç—…æº"
        ],
        "prevention": [
            "ä½¿ç”¨èªè­‰ç„¡ç—…ç¨®è‹—ï¼Œé¿å…è‡ªç•™ç¨®",
            "é¸æ¤å« Ph-3 æŠ—æ€§åŸºå› å“ç¨®",
            "é«˜ç•¦æ ½åŸ¹ï¼Œç¢ºä¿è‰¯å¥½æ’æ°´",
            "è¨­æ–½æ ½åŸ¹ä¸¦æ§åˆ¶æº«æ¿•åº¦",
            "ç”°é–“å·¡è¦–é »ç‡æé«˜è‡³æ¯ 2 å¤©ä¸€æ¬¡"
        ],
        "treatment": [
            "ç”²éœœéˆï¼ˆMetalaxylï¼‰25% WP 800 å€æ¶²ï¼ˆç³»çµ±æ€§ï¼Œå¿«é€Ÿå¸æ”¶ï¼‰",
            "çƒ¯é†¯å—å•‰ï¼ˆDimethomorphï¼‰50% WP 1000 å€æ¶²",
            "æ°Ÿå¡èŒèƒºï¼ˆFluopicolideï¼‰6.25% SC 1500 å€æ¶²",
            "æ³¢çˆ¾å¤šæ¶² 1:1:100ï¼ˆéŠ…è£½åŠ‘ï¼Œä¿è­·æ€§ï¼‰",
            "äº¤æ›¿ä½¿ç”¨ä¸åŒä½œç”¨æ©Ÿåˆ¶è—¥åŠ‘å»¶ç·©æŠ—è—¥æ€§ç”¢ç”Ÿ"
        ],
        "expert_advice": "æ™šç–«ç—…å…·æœ‰ã€Œçˆ†ç‚¸æ€§è”“å»¶ã€ç‰¹æ€§ï¼Œåœ¨é©å®œæ¢ä»¶ä¸‹ 3â€“5 å¤©å¯æ¯€æ»…æ•´å€‹ç”°å€ã€‚ä¸€æ—¦ç™¼ç¾ç–‘ä¼¼ç—…ä¾‹ï¼Œç«‹å³å°å…¨ç”°æ–½è—¥ä¸¦é€šçŸ¥é„°è¿‘è¾²å ´ï¼ŒåŒæ™‚å‘ç•¶åœ°è¾²æ¥­æ”¹è‰¯å ´é€šå ±ã€‚å»ºè­°ä½¿ç”¨æ°£è±¡é è­¦æ¨¡å‹ï¼ˆå¦‚ BLITECASTï¼‰è¼”åŠ©å™´è—¥æ±ºç­–ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Potato_blight.jpg/640px-Potato_blight.jpg",
                "caption": "æ™šç–«ç—…è‘‰ç‰‡ç™½è‰²éœœé»´å±¤",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Tomato___Late_blight"
    },
    {
        "id": "corn_gray_leaf_spot",
        "name_zh": "ç‰ç±³ç°è‘‰æ–‘ç—…",
        "name_en": "Corn Gray Leaf Spot",
        "pathogen": "Cercospora zeae-maydis",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["ç‰ç±³"],
        "severity": "ä¸­åº¦è‡³åš´é‡",
        "severity_level": 2,
        "distribution": "åŒ—ç¾ã€æ±éã€äºæ´²ç†±å¸¶åŠäºç†±å¸¶åœ°å€ï¼Œå°ç£å¤ç‰ç±³ç¨®æ¤å€",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾é•·æ–¹å½¢ç°æ£•è‰²è‡³é»ƒè¤è‰²ç—…æ–‘",
            "ç—…æ–‘å—è‘‰è„ˆé™åˆ¶ï¼Œå‘ˆæ˜é¡¯çŸ©å½¢å¤–è§€",
            "ç—…æ–‘é•· 5â€“25 mmï¼Œå¯¬ 2â€“4 mm",
            "åš´é‡æ™‚å¤šå€‹ç—…æ–‘é€£åˆï¼Œå¤§é¢ç©è‘‰æ¯",
            "ç™¼ç—…ç”±æ¤æ ªä¸‹æ–¹è‘‰ç‰‡å‘ä¸Šè”“å»¶"
        ],
        "causes": [
            "ç—…èŒä»¥èŒçµ²åœ¨å‰ä¸€å­£ç‰ç±³æ®˜æ ªä¸Šè¶Šå†¬",
            "æº«åº¦ 25â€“30Â°Cã€å¤œé–“æœ‰éœ²æ°´æ™‚å­¢å­å¤§é‡é‡‹æ”¾",
            "å…è€•æˆ–å°‘è€•è¾²æ³•ä½¿åœ°è¡¨æ®˜æ ªä¿ç•™ï¼Œå¢åŠ åˆå§‹èŒæº",
            "æ„Ÿç—…è‡ªäº¤ç³»é…è£½çš„é›œäº¤ç¨®ç¨®æ¤é¢¨éšªé«˜"
        ],
        "prevention": [
            "ç¨®æ¤å° GLS å…·ä¸­æŠ—è‡³é«˜æŠ—æ€§çš„é›œäº¤ç¨®",
            "å¯¦æ–½è¼ªä½œï¼ˆèˆ‡éç¦¾æœ¬ç§‘ä½œç‰©äº¤æ›¿ï¼‰",
            "ç§‹å­£ç¿»è€•æ®˜æ ªï¼Œä¿ƒé€²ç—…æ®˜é«”åˆ†è§£",
            "åˆç†å¯†æ¤ï¼Œç¶­æŒç”°é–“é€šé¢¨"
        ],
        "treatment": [
            "ä¸™ç’°å”‘ï¼ˆPropiconazoleï¼‰25% EC 500 å€æ¶²",
            "å¡å”‘é†šèŒé…¯ï¼ˆPyraclostrobinï¼‰250 g/L EC 1500 å€æ¶²",
            "åœ¨å¤§å–‡å­å£æœŸè‡³æŠ½ç©—æœŸé‡é»é˜²æ²»ï¼Œæ¯ 14 å¤©ä¸€æ¬¡",
            "ä½¿ç”¨ç„¡äººæ©Ÿå™´è—¥æå‡ä½œæ¥­æ•ˆç‡"
        ],
        "expert_advice": "ç‰ç±³ç°è‘‰æ–‘ç—…ä¸€æ—¦åœ¨ç”°é–“å»ºç«‹ï¼Œé˜²æ²»æˆæœ¬é¡¯è‘—ä¸Šå‡ã€‚å“ç¨®æŠ—æ€§æ˜¯æœ€å…·æˆæœ¬æ•ˆç›Šçš„é˜²æ²»æ‰‹æ®µâ€”â€”åœ¨é¸è³¼ç¨®å­æ™‚ï¼Œæ‡‰ç´¢å–æŠ—ç—…æ€§è©•åˆ†è³‡æ–™ï¼Œé¸ç”¨ GLS æŠ—æ€§è©•åˆ† â‰¥ 6 çš„å“ç¨®ï¼ˆ10 åˆ†åˆ¶ï¼‰ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Cercospora_zeae-maydis_on_corn.jpg/640px-Cercospora_zeae-maydis_on_corn.jpg",
                "caption": "ç‰ç±³ç°è‘‰æ–‘ç—…çŸ©å½¢ç—…æ–‘",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Corn___Gray_leaf_spot"
    },
    {
        "id": "apple_scab",
        "name_zh": "è˜‹æœé»‘æ˜Ÿç—…",
        "name_en": "Apple Scab",
        "pathogen": "Venturia inaequalis",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["è˜‹æœ", "æ¢¨", "å±±æ¥‚"],
        "severity": "åš´é‡",
        "severity_level": 3,
        "distribution": "å…¨çƒè˜‹æœç¨®æ¤å€ï¼Œæº«å¸¶æµ·æ´‹æ€§æ°£å€™æœ€æ™®éï¼Œå°ç£æ¢¨å±±ã€ç¦å£½å±±ç­‰é«˜å†·åœ°",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾æ©„æ¬–ç¶ è‡³é»‘è‰²å¤©éµçµ¨ç‹€ç—…æ–‘",
            "è‘‰èƒŒç—…æ–‘è¼ƒè‘‰é¢æ›´æ˜é¡¯",
            "åš´é‡æ„ŸæŸ“å°è‡´è‘‰ç‰‡æ‰­æ›²ã€æ—©æœŸè½è‘‰",
            "æœå¯¦è¡¨é¢å‡ºç¾é»‘è‰²é¾œè£‚ç¡¬åŒ–ç—…æ–‘",
            "å¹¼æœå—å®³å¾Œç™¼è‚²ä¸è‰¯ï¼Œå¤±å»å•†å“åƒ¹å€¼"
        ],
        "causes": [
            "ç—…èŒä»¥å­å›Šæ®¼åœ¨è½è‘‰ä¸­è¶Šå†¬ï¼Œæ˜¥å­£é‡‹æ”¾å­å›Šå­¢å­",
            "æ˜¥é›¨æœŸï¼ˆèŒèŠ½è‡³è½èŠ±å¾Œï¼‰ç‚ºåˆæ¬¡æ„ŸæŸ“çš„é—œéµæœŸ",
            "Mills æ„ŸæŸ“æœŸï¼ˆæº«åº¦ Ã— è‘‰é¢æ¿•æ½¤æ™‚é–“ï¼‰æ±ºå®šæ„ŸæŸ“æ©Ÿç‡",
            "å“ç¨®æ„Ÿç—…æ€§å·®ç•°æ¥µå¤§"
        ],
        "prevention": [
            "ç§‹å†¬è½è‘‰å¾Œæ¸…é™¤ä¸¦éŠ·æ¯€ï¼Œæˆ–åœ¨è½è‘‰ä¸Šå™´æ–½å°¿ç´ ä¿ƒé€²åˆ†è§£",
            "é¸æ¤æŠ—é»‘æ˜Ÿç—…å“ç¨®ï¼ˆLibertyã€Priscillaã€GoldRushï¼‰",
            "åˆç†ä¿®å‰ªï¼Œæ”¹å–„æœåœ’é€šé¢¨é€å…‰",
            "èŒèŠ½æœŸå‰å™´æ–½çŸ³ç°ç¡«ç£ºåˆåŠ‘æ¸…åœ’"
        ],
        "treatment": [
            "è‹¯èŒéˆï¼ˆBenomylï¼‰50% WP 800 å€æ¶²ï¼ˆç³»çµ±æ€§ï¼‰",
            "è…ˆèŒå”‘ï¼ˆMyclobutanilï¼‰12% EC 1500 å€æ¶²",
            "ä»£æ£®éŒ³é‹…ï¼ˆMancozebï¼‰75% WP 600 å€æ¶²ï¼ˆä¿è­·æ€§ï¼‰",
            "èŠ±èŠ½è†¨å¤§æœŸé–‹å§‹ï¼Œæ¯ 7â€“14 å¤©ä¾ Mills è¡¨æ±ºå®šæ˜¯å¦å™´æ–½"
        ],
        "expert_advice": "è˜‹æœé»‘æ˜Ÿç—…é˜²æ²»çš„æ ¸å¿ƒæ˜¯ã€ŒæŠ“ä½æ˜¥å­£æ„ŸæŸ“æœŸã€ã€‚åˆ©ç”¨ RIMpro æˆ– metos ç­‰ç—…å®³é è­¦ç³»çµ±ï¼Œçµåˆç•¶åœ°æ°£è±¡è³‡æ–™è¨ˆç®— Mills å€¼ï¼Œå¯åšåˆ°ç²¾æº–å™´è—¥ï¼Œæ¸›å°‘è¾²è—¥ç”¨é‡ 30â€“40% åŒæ™‚ç¶­æŒç›¸åŒé˜²æ²»æ•ˆæœã€‚æœ‰æ©Ÿæœåœ’å¯äº¤æ›¿ä½¿ç”¨ç¡«ç£ºè£½åŠ‘å’ŒéŠ…è£½åŠ‘ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Apple_scab_lÃ©sion.jpg/640px-Apple_scab_lÃ©sion.jpg",
                "caption": "è˜‹æœé»‘æ˜Ÿç—…æœå¯¦å…¸å‹ç—…æ–‘",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Apple___Apple_scab"
    },
    {
        "id": "grape_black_rot",
        "name_zh": "è‘¡è„é»‘è…ç—…",
        "name_en": "Grape Black Rot",
        "pathogen": "Guignardia bidwellii",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["è‘¡è„"],
        "severity": "åš´é‡",
        "severity_level": 3,
        "distribution": "åŒ—ç¾æ±éƒ¨ã€æ­æ´²ã€äºæ´²è‘¡è„ç”¢å€ï¼Œå°ç£å½°åŒ–ã€å°ä¸­è‘¡è„ç¨®æ¤å€",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾æ·¡è¤è‰²åœ“å½¢è‡³ä¸è¦å‰‡å½¢ç—…æ–‘ï¼Œé‚Šç·£æ·±è¤è‰²",
            "ç—…æ–‘ä¸Šå‡ºç¾é»‘è‰²å°ç²’é»ï¼ˆæŸ„å­æ®¼ï¼‰",
            "æœå¯¦å—å®³åˆæœŸå‡ºç¾ç™½è‰²å°æ–‘é»",
            "æœå¯¦è¿…é€Ÿè®Šè¤ã€çšºç¸®ï¼Œæœ€çµ‚è®Šæˆé»‘è‰²æœ¨ä¹ƒä¼Šæœ",
            "æ–°æ¢¢å‡ºç¾æ©¢åœ“å½¢é»‘è‰²æ½°ç˜æ–‘"
        ],
        "causes": [
            "ç—…èŒä»¥èŒæ ¸åœ¨æœ¨ä¹ƒä¼Šæœå’Œç—…æ¢¢ä¸­è¶Šå†¬",
            "æ˜¥å­£æ°£æº« 7â€“32Â°C é…åˆé›¨éœ²æ™‚å­¢å­å¤§é‡é‡‹æ”¾",
            "åæœå¾Œ 2â€“5 é€±æœå¯¦æœ€æ˜“æ„Ÿç—…",
            "å¯†é›†æ ½åŸ¹ã€é€šé¢¨ä¸è‰¯åŠ é€Ÿç—…å®³è”“å»¶"
        ],
        "prevention": [
            "å†¬å­£æ¸…é™¤æœ¨ä¹ƒä¼Šæœå’Œç—…æ®˜æï¼Œæ¸›å°‘è¶Šå†¬èŒæº",
            "é¸ç”¨ Concordã€Niagara ç­‰è¼ƒè€ç—…å“ç¨®",
            "æ¡ V å‹æ•´æï¼Œæé«˜é€šé¢¨é€å…‰",
            "ä½¿ç”¨é˜²é›¨è¨­æ–½æ ½åŸ¹"
        ],
        "treatment": [
            "ç”²åŸºå¤šä¿æ·¨ï¼ˆThiophanate-methylï¼‰70% WP 1000 å€æ¶²",
            "å…‹æ°¯è‹¯ï¼ˆCaptanï¼‰50% WP 800 å€æ¶²",
            "è…ˆèŒå”‘ï¼ˆMyclobutanilï¼‰12% EC 1500 å€æ¶²",
            "å¾èŒèŠ½æœŸé–‹å§‹æ¯ 10â€“14 å¤©å™´æ–½"
        ],
        "expert_advice": "é»‘è…ç—…æœ€é—œéµçš„é˜²æ²»æ™‚æ©Ÿæ˜¯èŠ±å‰åˆ°å¹¼æœæœŸï¼ŒéŒ¯éæ­¤é—œéµæœŸå¾Œé˜²æ²»æ•ˆæœå¤§å¹…é™ä½ã€‚å»ºè­°åœ¨æ˜¥å­£èŒèŠ½æ™‚å³å»ºç«‹å™´è—¥è¡Œäº‹æ›†ï¼Œä¸¦åœ¨æ¯æ¬¡é™é›¨å¾Œ 48 å°æ™‚å…§å®Œæˆè£œå™´ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Grapeblackrot.jpg/640px-Grapeblackrot.jpg",
                "caption": "è‘¡è„é»‘è…ç—…æœ¨ä¹ƒä¼Šæœ",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Grape___Black_rot"
    },
    {
        "id": "rice_blast",
        "name_zh": "æ°´ç¨»ç¨»ç†±ç—…",
        "name_en": "Rice Blast",
        "pathogen": "Magnaporthe oryzae",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["æ°´ç¨»"],
        "severity": "åš´é‡",
        "severity_level": 3,
        "distribution": "å…¨çƒæ°´ç¨»ç¨®æ¤å€ï¼Œä¸–ç•Œæœ€é‡è¦çš„æ°´ç¨»ç—…å®³ä¹‹ä¸€ï¼Œå°ç£å„åœ°ç¨»ä½œå‡æœ‰ç™¼ç”Ÿ",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾è±å½¢æˆ–ç´¡éŒ˜å½¢ç—…æ–‘ï¼Œä¸­å¤®ç°ç™½è‰²ï¼Œé‚Šç·£è¤è‰²",
            "ç©—é ¸æ„ŸæŸ“ï¼ˆç©—é ¸ç˜Ÿï¼‰ï¼šç©—é ¸ç¯€è®Šè¤è…çˆ›ï¼Œå°è‡´ç™½ç©—",
            "ç¯€ç˜Ÿï¼šè–ç¯€è®Šé»‘ï¼Œæ¤æ ªå®¹æ˜“æŠ˜æ–·",
            "è‹—ç˜Ÿï¼šå¹¼è‹—æœŸç™¼ç—…ï¼Œè‘‰ç‰‡æ¯èæ­»äº¡",
            "åš´é‡ç©—é ¸ç˜Ÿå¯å°è‡´å®Œå…¨ç„¡æ”¶"
        ],
        "causes": [
            "ç—…èŒä»¥åˆ†ç”Ÿå­¢å­æˆ–èŒçµ²åœ¨ç¨®å­åŠç—…æ®˜é«”ä¸­è¶Šå†¬",
            "æ°£æº« 20â€“28Â°Cã€ç›¸å°æ¿•åº¦ >90% æœ€åˆ©ç™¼ç—…",
            "éé‡æ–½ç”¨æ°®è‚¥ä½¿æ¤æ ªçµ„ç¹”æŸ”å«©ï¼Œæ˜“æ„Ÿç—…",
            "é€£ä½œç¨»ç”°å¸¶èŒé‡é€å¹´ç´¯ç©"
        ],
        "prevention": [
            "é¸ç”¨æŠ—ç¨»ç†±ç—…å“ç¨®ï¼ˆå°è¾² 67 è™Ÿå…·ä¸€å®šæŠ—æ€§ï¼‰",
            "å¹³è¡¡æ–½è‚¥ï¼Œé¿å…éé‡æ–½æ°®",
            "æé«˜ç§»æ¤å¯†åº¦è‡³åˆç†ç¯„åœï¼Œé¿å…éå¯†",
            "åˆ©ç”¨æŠ—ç—…å“ç¨®è¼ªæ›æ ½åŸ¹ï¼Œå»¶ç·©ç”Ÿç†å°ç¨®é©æ‡‰"
        ],
        "treatment": [
            "ä¸‰ç’°å”‘ï¼ˆTricyclazoleï¼‰75% WP 800 å€æ¶²ï¼ˆé é˜²å…¼æ²»ç™‚ï¼‰",
            "ç•°ç¨»ç˜Ÿæ·¨ï¼ˆIsoprothiolaneï¼‰40% EC 800 å€æ¶²",
            "å˜§èŒé…¯ï¼ˆAzoxystrobinï¼‰25% SC 1000 å€æ¶²",
            "ç©—é ¸ç˜Ÿé‡é»åœ¨é½Šç©—å‰ 5 å¤©åŠé½Šç©—æ™‚å„å™´ä¸€æ¬¡"
        ],
        "expert_advice": "ç©—é ¸ç˜Ÿæ˜¯ç¨»ç†±ç—…ä¸­å±å®³æœ€åš´é‡çš„é¡å‹ï¼Œå› ç‚ºä¸€æ—¦ç©—é ¸æ„ŸæŸ“ï¼Œæ•´ç©—å¤±æ”¶ç„¡æ³•æŒ½æ•‘ã€‚é é˜²æ€§æ–½è—¥å¿…é ˆåœ¨ã€Œç ´å£æœŸï¼ˆåŠè‘‰æŠ½å‡ºï¼‰ã€å‰ 5â€“7 å¤©é€²è¡Œï¼Œé€™æ˜¯é˜²æ²»ç©—é ¸ç˜Ÿæœ€é—œéµçš„æ™‚é–“è¦–çª—ï¼ŒéŒ¯éå¾Œè£œæ•‘æ•ˆæœæœ‰é™ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Rice_leaf_blast.jpg/640px-Rice_leaf_blast.jpg",
                "caption": "æ°´ç¨»ç¨»ç†±ç—…è‘‰ç‰‡å…¸å‹ç´¡éŒ˜å½¢ç—…æ–‘",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Rice___Leaf_blast"
    },
    {
        "id": "peach_bacterial_spot",
        "name_zh": "æ¡ƒç´°èŒæ€§ç©¿å­”ç—…",
        "name_en": "Peach Bacterial Spot",
        "pathogen": "Xanthomonas arboricola pv. pruni",
        "category": "ç´°èŒæ€§ç—…å®³",
        "host_plants": ["æ¡ƒ", "æ", "æ", "æ¢…", "æ«»æ¡ƒ"],
        "severity": "ä¸­åº¦",
        "severity_level": 2,
        "distribution": "å…¨çƒæ ¸æœé¡ç¨®æ¤å€ï¼Œå°ç£æ‹‰æ‹‰å±±ã€æ¢¨å±±æ¡ƒæç”¢å€å¸¸è¦‹",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾æ°´æµ¸ç‹€å°æ–‘é»ï¼Œå¾Œè½‰ç‚ºè¤è‰²",
            "ç—…æ–‘è„«è½å½¢æˆç©¿å­”ï¼Œè‘‰ç‰‡ä¼¼å½ˆå­”ç‹€",
            "åš´é‡æ™‚è‘‰ç‰‡å¤§é‡è„«è½ï¼Œæ¨¹å‹¢è¡°å¼±",
            "æœå¯¦å‡ºç¾æ·±è¤è‰²é¾œè£‚ç—…æ–‘ï¼Œå¤±å»å•†å“åƒ¹å€¼",
            "å«©æ¢¢å‡ºç¾æ½°ç˜ç—…æ–‘ï¼Œç”šè‡³æ¯æ­»"
        ],
        "causes": [
            "ç´°èŒåœ¨ææ¢æ½°ç˜éƒ¨ä½è¶Šå†¬",
            "æ˜¥å­£æº«æš–å¤šé›¨æ™‚ï¼Œé›¨æ°´å°‡ç´°èŒå¾æ½°ç˜éƒ¨ä½æ²–è‡³è‘‰ç‰‡",
            "å‚·å£ã€æ°£å­”æ˜¯ç´°èŒå…¥ä¾µé€”å¾‘",
            "å¼·é¢¨å¤šé›¨ã€å“ç¨®æ„Ÿç—…æ€§é«˜æ˜¯ä¸»è¦é¢¨éšªå› å­"
        ],
        "prevention": [
            "é¸ç”¨æŠ—ç—…å“ç¨®ï¼Œé¿å…ç¨®æ¤é«˜æ„Ÿç—…å“ç¨®",
            "å†¬å­£ä¿®é™¤ç—…æï¼Œå¡—æŠ¹ä¿è­·åŠ‘",
            "è¨­ç«‹é˜²é¢¨æ—æˆ–é˜²é¢¨ç¶²ï¼Œæ¸›å°‘é¢¨é›¨å‚·å®³",
            "é¿å…éé‡æ–½ç”¨æ°®è‚¥"
        ],
        "treatment": [
            "æ˜¥å­£èŒèŠ½å‰å™´æ–½çŸ³ç°ç¡«ç£ºåˆåŠ‘ï¼ˆ4â€“5 æ³¢ç¾åº¦ï¼‰",
            "æ°«æ°§åŒ–éŠ…ï¼ˆCopper hydroxideï¼‰77% WP 800 å€æ¶²",
            "éˆé»´ç´ ï¼ˆStreptomycinï¼‰200 ppmï¼ˆæ³¨æ„æŠ—è—¥æ€§å•é¡Œï¼‰",
            "æ¤æ ªå‚·å£ç«‹å³å¡—æŠ¹æœæ¨¹ä¿è­·åŠ‘"
        ],
        "expert_advice": "ç´°èŒæ€§ç©¿å­”ç—…çš„é˜²æ²»é—œéµåœ¨æ˜¥å­£èŒèŠ½å‰çš„æ¸…åœ’å·¥ä½œã€‚éŠ…è£½åŠ‘é›–æœ‰æ•ˆï¼Œä½†é•·æœŸå¤§é‡ä½¿ç”¨å®¹æ˜“é€ æˆåœŸå£¤éŠ…ç©ç´¯å•é¡Œï¼Œå»ºè­°è¼ªæ›ä½¿ç”¨ä¸åŒé¡å‹æ®ºèŒåŠ‘ï¼Œä¸¦æ­é…è‰¯å¥½çš„è¾²æ¥­ç®¡ç†æªæ–½é™ä½è¾²è—¥ä¾è³´ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Bacterial_spot_peach.jpg/640px-Bacterial_spot_peach.jpg",
                "caption": "æ¡ƒè‘‰ç´°èŒæ€§ç©¿å­”ç—…å…¸å‹ç—‡ç‹€",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Peach___Bacterial_spot"
    },
    {
        "id": "potato_early_blight",
        "name_zh": "é¦¬éˆ´è–¯æ—©ç–«ç—…",
        "name_en": "Potato Early Blight",
        "pathogen": "Alternaria solani",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["é¦¬éˆ´è–¯", "ç•ªèŒ„"],
        "severity": "ä¸­åº¦",
        "severity_level": 2,
        "distribution": "å…¨çƒé¦¬éˆ´è–¯ç”¢å€ï¼Œå°ç£é›²æ—ã€å˜‰ç¾©é¦¬éˆ´è–¯ç¨®æ¤å€",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾åŒå¿ƒåœ“ç‹€è¤è‰²ç—…æ–‘ï¼ˆé¶å¿ƒæ–‘ï¼‰",
            "ç—…æ–‘å‘¨åœæœ‰é»ƒè‰²æ°¯åŒ–åœˆ",
            "ç”±æˆç†Ÿè€è‘‰é–‹å§‹ï¼Œé€æ¼¸å‘å¹¼å«©è‘‰è”“å»¶",
            "åš´é‡æ™‚è‘‰ç‰‡ä¹¾æ¯ï¼Œææ—©è½è‘‰",
            "å¡Šè–è¡¨é¢å‡ºç¾æš—è¤è‰²ä¹¾è…ç—…æ–‘"
        ],
        "causes": [
            "ç—…èŒä»¥åˆ†ç”Ÿå­¢å­åœ¨åœŸå£¤åŠç—…æ®˜é«”ä¸­è¶Šå†¬",
            "æ¤æ ªé•·å‹¢å¼±æ™‚ï¼ˆç”Ÿé•·å¾ŒæœŸã€ç¼ºè‚¥ï¼‰æœ€æ˜“æ„Ÿç—…",
            "æº«æš–ï¼ˆ24â€“29Â°Cï¼‰æ½®æ¿•ç’°å¢ƒä¿ƒé€²ç™¼ç—…",
            "é›¨æ»´é£›æ¿ºå‚³æ’­åˆ†ç”Ÿå­¢å­"
        ],
        "prevention": [
            "é¸ç”¨ç„¡ç—…ç¨®è–¯ï¼Œç¨®æ¤å‰ç”¨æ®ºèŒåŠ‘è™•ç†",
            "å¹³è¡¡æ–½è‚¥ï¼Œç‰¹åˆ¥æ³¨æ„é‰€è‚¥è£œå……ä»¥å¢å¼·æŠ—ç—…åŠ›",
            "é©æ™‚çŒæ°´ï¼Œé¿å…åœŸå£¤éä¹¾å¾Œçªç„¶å¤§é‡çŒæ°´",
            "è¼ªä½œï¼ˆèˆ‡åå­—èŠ±ç§‘ã€ç¦¾æœ¬ç§‘è¼ªæ›ï¼‰"
        ],
        "treatment": [
            "å˜§èŒé…¯ï¼ˆAzoxystrobinï¼‰25% SC 1000 å€æ¶²",
            "ä»£æ£®éŒ³é‹…ï¼ˆMancozebï¼‰75% WP 600 å€æ¶²",
            "æ°Ÿå˜§èŒé…¯ï¼ˆFluoxastrobinï¼‰50% WG 1500 å€æ¶²",
            "æ¯ 7â€“10 å¤©å™´æ–½ä¸€æ¬¡ï¼Œé€£æ–½ 3â€“4 æ¬¡"
        ],
        "expert_advice": "é¦¬éˆ´è–¯æ—©ç–«ç—…å¸¸åœ¨æ¤æ ªç”Ÿè‚²å¾ŒæœŸï¼ˆé–‹èŠ±å¾Œï¼‰çˆ†ç™¼ï¼Œæ­¤æ™‚æ¤æ ªæŠµæŠ—åŠ›ä¸‹é™ã€‚æ‡‰åœ¨é–‹èŠ±åˆæœŸå³é–‹å§‹ä¿è­·æ€§æ–½è—¥ï¼ŒåŒæ™‚è£œå……è‘‰é¢é‰€è‚¥ï¼ˆ0.3% ç£·é…¸äºŒæ°«é‰€ï¼‰ä»¥å¼·åŒ–æ¤æ ªæŠ—é€†æ€§ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/Alternaria_solani_potato.jpg/640px-Alternaria_solani_potato.jpg",
                "caption": "é¦¬éˆ´è–¯æ—©ç–«ç—…é¶å¿ƒç‹€ç—…æ–‘",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Potato___Early_blight"
    },
    {
        "id": "strawberry_leaf_scorch",
        "name_zh": "è‰è“è‘‰ç„¦ç—…",
        "name_en": "Strawberry Leaf Scorch",
        "pathogen": "Diplocarpon earlianum",
        "category": "çœŸèŒæ€§ç—…å®³",
        "host_plants": ["è‰è“"],
        "severity": "ä¸­åº¦",
        "severity_level": 2,
        "distribution": "å…¨çƒè‰è“ç”¢å€ï¼Œå°ç£è‹—æ —å¤§æ¹–ã€å°ä¸­æ±å‹¢è‰è“ç¨®æ¤å€",
        "symptoms": [
            "è‘‰ç‰‡å‡ºç¾ä¸è¦å‰‡å½¢ç´«ç´…è‰²è‡³è¤è‰²å°æ–‘é»",
            "ç—…æ–‘ä¸­å¤®ç°ç™½è‰²ï¼Œé‚Šç·£æ·±è¤è‰²",
            "åš´é‡æ™‚ç—…æ–‘é€£åˆï¼Œè‘‰ç·£ç„¦æ¯",
            "æ•´æ ªå‘ˆç„¦æ¯ç‹€ï¼Œå½±éŸ¿å…‰åˆä½œç”¨",
            "æœå¯¦å“è³ªä¸‹é™ï¼Œç”¢é‡æ¸›å°‘"
        ],
        "causes": [
            "ç—…èŒä»¥å­å›Šæ®¼æˆ–åˆ†ç”Ÿå­¢å­ç›¤åœ¨ç—…è‘‰ä¸Šè¶Šå†¬",
            "æ˜¥å­£æº«æš–å¤šé›¨æ™‚å­¢å­å¤§é‡é‡‹æ”¾",
            "æ°´åˆ†é£›æ¿ºå‚³æ’­ç—…èŒ",
            "å¯†æ¤ã€é€šé¢¨ä¸è‰¯çš„æº«å®¤æ ½åŸ¹ç’°å¢ƒé«˜ç™¼"
        ],
        "prevention": [
            "é¸ç”¨æŠ—ç—…å“ç¨®ï¼ˆå¦‚é¦™æ°´è‰è“è¼ƒæ˜“æ„Ÿç—…ï¼Œå»ºè­°æ”¹ç¨®å…¶ä»–å“ç¨®ï¼‰",
            "é©ç•¶ç–è‘‰ï¼Œä¿æŒé€šé¢¨",
            "æ¡ç”¨é«˜æ¶æ ½åŸ¹ï¼Œæ¸›å°‘æ°´åˆ†é£›æ¿º",
            "å®šæœŸæ¸…é™¤è€è‘‰åŠç—…è‘‰"
        ],
        "treatment": [
            "å˜§èŒé…¯ï¼ˆAzoxystrobinï¼‰25% SC 1500 å€æ¶²",
            "æ°Ÿç¡…å”‘ï¼ˆFlusilazoleï¼‰40% EC 5000 å€æ¶²",
            "äºŒè‹¯é†šï¼ˆDiphenylamineï¼‰é¡æ®ºèŒåŠ‘",
            "ç™¼ç—…åˆæœŸæ¯ 7â€“10 å¤©å™´æ–½ä¸€æ¬¡"
        ],
        "expert_advice": "è‰è“è‘‰ç„¦ç—…åœ¨å°ç£è¨­æ–½è‰è“æ ½åŸ¹ä¸­æ™®éç™¼ç”Ÿã€‚å»ºè­°åœ¨æ¤æ ªå®šæ¤å¾Œ 2â€“3 é€±é–‹å§‹é é˜²æ€§å™´è—¥ï¼Œä¸¦é…åˆé©ç•¶é€šé¢¨ç®¡ç†ã€‚æ³¨æ„é¿å…åœ¨è‰è“æˆç²‰æœŸé–“å™´æ–½æ®ºèŒåŠ‘ï¼Œä»¥å…å½±éŸ¿æˆç²‰æ˜†èŸ²ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Strawberry_leaf_scorch.jpg/640px-Strawberry_leaf_scorch.jpg",
                "caption": "è‰è“è‘‰ç„¦ç—…è‘‰ç‰‡ç—‡ç‹€",
                "source": "Wikipedia"
            }
        ],
        "kaggle_class": "Strawberry___Leaf_scorch"
    },
    {
        "id": "healthy",
        "name_zh": "å¥åº·æ¤ç‰©",
        "name_en": "Healthy Plant",
        "pathogen": "ç„¡",
        "category": "å¥åº·",
        "host_plants": ["æ‰€æœ‰ä½œç‰©"],
        "severity": "ç„¡",
        "severity_level": 0,
        "distribution": "â€”",
        "symptoms": [
            "è‘‰è‰²é®®ç¶ å‡å‹»ï¼Œç„¡è¤ªè‰²æˆ–å£ç–½",
            "è‘‰å½¢æ­£å¸¸ï¼Œç„¡æ‰­æ›²è®Šå½¢",
            "è‘‰é¢å…‰æ»‘ï¼Œç„¡ç—…æ–‘æˆ–ç•°å¸¸ç´‹è·¯",
            "æ¤æ ªç”Ÿé•·å‹¢å¼·ï¼Œç¯€é–“æ­£å¸¸"
        ],
        "causes": ["è‰¯å¥½è¾²æ¥­ç®¡ç†", "é©ç•¶æ°´è‚¥ä¾›æ‡‰", "åˆç†ç—…èŸ²å®³é˜²æ²»"],
        "prevention": [
            "æŒçºŒå®šæœŸå·¡è¦–ç”°é–“ï¼ŒåŠæ—©ç™¼ç¾å•é¡Œ",
            "ç¶­æŒåˆç†æ°´è‚¥ç®¡ç†",
            "å»ºç«‹è¾²äº‹è¨˜éŒ„ç¿’æ…£ï¼Œè¿½è¹¤æ¤æ ªå¥åº·ç‹€æ…‹"
        ],
        "treatment": ["ç›®å‰ç„¡éœ€æ²»ç™‚", "ç¶­æŒç¾è¡Œè¾²æ¥­ç®¡ç†æªæ–½å³å¯"],
        "expert_advice": "æ‚¨çš„æ¤ç‰©ç›®å‰å‘ˆç¾å¥åº·ç‹€æ…‹ï¼å»ºè­°æŒçºŒç¶­æŒç¾è¡Œè‰¯å¥½çš„è¾²æ¥­ç®¡ç†å¯¦è¸ï¼Œä¸¦å®šæœŸé€²è¡Œè‘‰ç‰‡å¤–è§€æª¢æŸ¥ã€‚é é˜²é‡æ–¼æ²»ç™‚ï¼Œè‰¯å¥½çš„åœŸå£¤å¥åº·ç®¡ç†æ˜¯ç¶­æŒä½œç‰©å¥åº·çš„æ ¹æœ¬ã€‚",
        "images": [
            {
                "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/PNG_transparency_demonstration_1.png/280px-PNG_transparency_demonstration_1.png",
                "caption": "å¥åº·è‘‰ç‰‡",
                "source": "ç¤ºæ„åœ–"
            }
        ],
        "kaggle_class": "Healthy"
    }
]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# çˆ¬èŸ²å‡½å¼
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def scrape_wikipedia(disease_name_en: str, disease_id: str) -> dict:
    """å¾ Wikipedia çˆ¬å–ç—…å®³è³‡è¨Šï¼Œä¸¦ç”¨ REST API å–å¾—é«˜å“è³ªç¸®åœ–"""
    # â”€â”€ 1. ç”¨ REST API å–å¾—æ‘˜è¦èˆ‡ç¸®åœ–ï¼ˆæœ€ç©©å®šï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    img_url = ""
    try:
        rest_url = (
            "https://en.wikipedia.org/api/rest_v1/page/summary/"
            + requests.utils.quote(disease_name_en.replace(" ", "_"))
        )
        rr = requests.get(rest_url, headers=HEADERS, timeout=10)
        if rr.status_code == 200:
            rdata = rr.json()
            thumb = rdata.get("thumbnail", {}).get("source", "")
            if thumb:
                # æŠŠé è¨­ç¸®åœ–å°ºå¯¸æ›æˆ 640px
                img_url = re.sub(r"/\d+px-", "/640px-", thumb)
                print(f"  âœ“ REST API åœ–ç‰‡ï¼š{img_url[:60]}...")
    except Exception as e:
        print(f"  âœ— REST API [{disease_name_en}]: {e}")

    # â”€â”€ 2. çˆ¬å–é é¢å–å¾—æ–‡å­—æ‘˜è¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    wiki_summary = ""
    try:
        page_url = f"https://en.wikipedia.org/wiki/{disease_name_en.replace(' ', '_')}"
        r = requests.get(page_url, headers=HEADERS, timeout=12)
        if r.status_code == 200:
            soup = BeautifulSoup(r.text, "lxml")
            content = soup.find("div", class_="mw-parser-output")
            if content:
                paras = []
                for p in content.find_all("p", recursive=False):
                    text = re.sub(r"\[.*?\]", "", p.get_text()).strip()
                    if len(text) > 80:
                        paras.append(text)
                    if len(paras) >= 2:
                        break
                wiki_summary = " ".join(paras)[:800]

                # REST API æ²’å–åˆ°åœ–æ™‚ï¼Œfallback ç”¨ infobox
                if not img_url:
                    infobox = soup.find("table", class_=re.compile("infobox"))
                    if infobox:
                        img_tag = infobox.find("img")
                        if img_tag and img_tag.get("src"):
                            raw = img_tag["src"]
                            if raw.startswith("//"):
                                raw = "https:" + raw
                            img_url = re.sub(r"/\d+px-", "/640px-", raw)
    except Exception as e:
        print(f"  âœ— Wikipedia page [{disease_name_en}]: {e}")

    print(f"  âœ“ Wikipedia [{disease_name_en}] - img={'æœ‰' if img_url else 'ç„¡'}")
    return {"wiki_summary": wiki_summary, "wiki_img": img_url}


# å…è¨±çš„åœ–ç‰‡å‰¯æª”å
IMAGE_EXTS = {".jpg", ".jpeg", ".png", ".gif", ".webp", ".svg"}


def scrape_additional_images(disease_name_en: str) -> list:
    """å¾ Wikimedia Commons æœå°‹æ›´å¤šã€çœŸå¯¦åœ–ç‰‡ã€‘ï¼Œéæ¿¾æ‰ PDF / å½±ç‰‡ç­‰éåœ–ç‰‡"""
    url = (
        "https://commons.wikimedia.org/w/api.php"
        f"?action=query&list=search"
        f"&srsearch={requests.utils.quote(disease_name_en + ' plant disease leaf')}"
        "&srnamespace=6&srlimit=10&format=json"   # å¤šæŠ“å¹¾ç­†æ‰èƒ½ç¯©é¸
    )
    try:
        r = requests.get(url, headers=HEADERS, timeout=10)
        data = r.json()
        imgs = []

        for item in data.get("query", {}).get("search", []):
            title = item.get("title", "")
            if not title.startswith("File:"):
                continue

            fname = title[5:]  # å»æ‰ "File:" å‰ç¶´

            # â”€â”€ åªä¿ç•™åœ–ç‰‡å‰¯æª”å â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            ext = "." + fname.rsplit(".", 1)[-1].lower() if "." in fname else ""
            if ext not in IMAGE_EXTS:
                print(f"  âŠ˜ è·³ééåœ–ç‰‡ï¼š{fname[:50]}")
                continue

            fname_encoded = requests.utils.quote(fname.replace(" ", "_"))
            thumb = f"https://commons.wikimedia.org/wiki/Special:FilePath/{fname_encoded}?width=640"

            imgs.append({
                "url": thumb,
                "caption": fname.rsplit(".", 1)[0],  # å»æ‰å‰¯æª”åç•¶ caption
                "source": "Wikimedia Commons",
            })

            if len(imgs) >= 2:  # æœ€å¤šå– 2 å¼µåœ–ç‰‡
                break

        return imgs
    except Exception as e:
        print(f"  âœ— Wikimedia Commons [{disease_name_en}]: {e}")
        return []


def run_scraper():
    print("=" * 60)
    print("ğŸ•·ï¸  æ¤ç‰©ç—…å®³è³‡è¨Šçˆ¬èŸ²å•Ÿå‹•")
    print("=" * 60)

    enriched = []
    for disease in STATIC_DISEASES:
        print(f"\nâ†’ è™•ç†ï¼š{disease['name_zh']} ({disease['name_en']})")

        # çˆ¬å– Wikipedia
        wiki_data = scrape_wikipedia(disease["name_en"], disease["id"])
        if wiki_data.get("wiki_summary"):
            disease["wiki_summary"] = wiki_data["wiki_summary"]
        if wiki_data.get("wiki_img") and not disease["images"][0].get("url", "").startswith("http"):
            disease["images"][0]["url"] = wiki_data["wiki_img"]

        # çˆ¬å–é¡å¤–åœ–ç‰‡
        extra_imgs = scrape_additional_images(disease["name_en"])
        disease["images"].extend(extra_imgs)

        enriched.append(disease)
        time.sleep(1.2)  # é¿å…é »ç¹è«‹æ±‚

    # å„²å­˜
    out_path = os.path.join(SCRAPED_DIR, "diseases.json")
    with open(out_path, "w", encoding="utf-8") as f:
        json.dump({"diseases": enriched, "total": len(enriched)}, f, ensure_ascii=False, indent=2)

    print(f"\nâœ… çˆ¬èŸ²å®Œæˆï¼å…± {len(enriched)} ç­†ç—…å®³è³‡æ–™")
    print(f"   å„²å­˜è‡³ï¼š{out_path}")
    return enriched


if __name__ == "__main__":
    run_scraper()